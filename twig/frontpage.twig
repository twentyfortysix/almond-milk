{% extends 'base.twig' %}
{% import 'macro/edit-link.twig' as editLink %}
{% import 'macro/anchor.twig' as anchor %}

{% block content %}
	{% for view in post.get_field('flexible_content') %}
		{% if view.acf_fc_layout == "lead" %}
			<div class="container {{ view.acf_fc_layout }}" style="background-image:url({{ view.image.sizes.large }})">
			</div>

		{% elseif view.acf_fc_layout == "gallery" %}
			<div class="container {{ view.acf_fc_layout }}">
				{{ anchor.input(view.anchor, post) }}
				{% for image in view.images %}
					{% set img = TimberImage(image.id) %}
						<div class="col-12 col-sm-4 col-md-4">
							<img src="{{ img.src('thumbnail') }}" alt="{{ post.title }}">
						</div>
				{% endfor %}
			</div>

		{% elseif view.acf_fc_layout == "alphabetical_list" %}
			{% import 'macro/letters.twig' as letters %}
			{% set list_data = fn('list_data', view.post_type) %}
			<div class="{{ view.acf_fc_layout }}">
				{{ letters.input(post.link, list_data) }}
				{% set letter = 'letsBegin' %}
				<div class="the_list">
					{% for item in list_data %}
						{% if item.post_title|first|lower != letter %}
							{% if letter != 'letsBegin' %}
								</div>
							{% endif %}
							<div class="alphabet">
							<a class="anchor" name="{{ item.post_title|slice(0, 2)|lower == 'ch' ? 'ch' : fn('diacriticEqvivalent',item.post_title|first|lower) }}"></a>
							{% set letter = item.post_title|first|lower  %}
						{% endif %}
							<div class="item">
								<a href="{{ item.link }}">
									{{ item.post_title ? item.post_title : "--no name--" }}
								</a>
							</div>
						{% if loop.index == list_data|length  %}
							</div>
						{% endif %}
					{% endfor %}
				</div>
			</div>
		{% endif %}

	{% endfor %}
{% endblock %}
